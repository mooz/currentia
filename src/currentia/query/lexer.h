/* Generated by re2c 0.13.5 on Wed Jun 27 02:54:50 2012 */
// -*- c++ -*-

// re2c --case-insensitive -i -o lex.cc lex.re

#ifndef CURRENTIA_QUERY_LEXER_H_
#define CURRENTIA_QUERY_LEXER_H_

#include <list>
#include <iostream>
#include <algorithm>
#include <functional>
#include <sstream>

#include <ctype.h>
#include <string.h>

#include "currentia/core/operator/comparator.h"
#include "currentia/query/parser.h"
#include "currentia/trait/non-copyable.h"



#define log(str) std::cout << str << std::endl
#define dump(x) std::cout << #x << " => [" << (x) << "]" << std::endl
#define TOKEN_EOS 0

namespace currentia {
    class Lexer : private NonCopyable<Lexer> {
    private:
        std::istream* ifs_ptr_;

        char* buffer_;
        char* yy_cursor_;
        char* yy_marker_;
        char* yy_limit_;
        char* token_begin_;
        long buffer_size_;
        long line_number_;

    public:
        typedef Lexer* ptr_t;

        static std::string token_to_string(int token) {
            return "NULL";
            // switch (token) {
            //     CURRENTIA_DEFINE_TOKEN_LIST(CURRENTIA_DEFINE_SWITCH_STRING)
            // default:
            //     return "UNEXPECTED_TOKEN";
            // };
        }

        Lexer(std::istream* ifs_ptr, long buffer_init_size = 1024):
            ifs_ptr_(ifs_ptr),
            buffer_size_(buffer_init_size),
            line_number_(1) {
            // Allocate
            buffer_ = reinterpret_cast<char*>(malloc(sizeof(char) * buffer_size_));
            // Init
            yy_cursor_ = yy_marker_ = yy_limit_ = token_begin_ = buffer_;
        }

        ~Lexer() {
            free(buffer_);
        }

        inline
        int get_buffer_used_size() {
            return yy_limit_ - buffer_;
        }

        inline
        int get_buffer_allocated_size() {
            return buffer_size_;
        }

        bool fill(int n) {
            if (ifs_ptr_->eof() && (yy_cursor_ >= yy_limit_))
                return false;   // EOS

            int remained_characters_count = yy_limit_ - yy_cursor_;
            int yy_cursor_offset = yy_cursor_ - buffer_;
            int yy_marker_offset = yy_marker_ - buffer_;
            int yy_limit_offset = yy_limit_ - buffer_;

            // dump(yy_cursor_offset);
            // dump(yy_limit_offset);

            if (remained_characters_count + n >= buffer_size_) {
                // Extend buffer
                log("We need to extend buffer");
                buffer_ = reinterpret_cast<char*>(realloc(buffer_, buffer_size_ *= 2));
                // Adjust position
                yy_cursor_ = token_begin_ = buffer_;
                yy_marker_ = buffer_ + yy_marker_offset;
                yy_limit_  = buffer_ + yy_limit_offset;
            } else if (remained_characters_count > 0) {
                // Shift remained characters in the buffer_ to head of the buffer_
                memmove(buffer_, yy_cursor_, sizeof(char) * remained_characters_count);
                // Adjust position (shift)
                yy_cursor_ = token_begin_ = buffer_;
                yy_marker_ = buffer_ + (yy_marker_offset - yy_cursor_offset);
                yy_limit_  = buffer_ + (yy_limit_offset - yy_cursor_offset);
            }

            // This line is very important (fill buffer with EOF)
            int empty_buffer_count = (buffer_ + buffer_size_) - yy_limit_;
            // dump(empty_buffer_count);
            // dump(buffer_);
            memset(yy_limit_, '\0', sizeof(char) * empty_buffer_count);
            // dump(buffer_);

            // Read characters from input stream
            ifs_ptr_->read(yy_limit_, empty_buffer_count);
            yy_limit_ += ifs_ptr_->gcount();
            // Dirty hack (for stringstream which doesn't give us a EOF character)
            if (ifs_ptr_->gcount() == 0 && *(yy_limit_ - 1) != '\0') {
                *(++yy_limit_) = '\0';
            }

            // log("Read");
            // dump(buffer_);

            return true;
        }

        std::string get_token_text() {
            return std::string(token_begin_, token_begin_ + get_token_length());
        }
        int get_token_length() {
            return yy_cursor_ - token_begin_;
        }

        int get_next_token() {
        start:
            token_begin_ = yy_cursor_;

            
            {
                char yych;
                unsigned int yyaccept = 0;

                if ((yy_limit_ - yy_cursor_) < 11) if (!fill(11)) { return TOKEN_EOS; }
                yych = *yy_cursor_;
                switch (yych) {
                case 0x00:    goto yy53;
                case '\t':
                case '\v':
                case '\f':
                case ' ':    goto yy5;
                case '\n':    goto yy7;
                case '\r':    goto yy8;
                case '!':    goto yy48;
                case '"':    goto yy24;
                case '#':    goto yy3;
                case '(':    goto yy42;
                case ')':    goto yy44;
                case ',':    goto yy38;
                case '.':    goto yy40;
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':    goto yy26;
                case ':':    goto yy28;
                case '<':    goto yy49;
                case '=':    goto yy46;
                case '>':    goto yy51;
                case 'A':
                case 'a':    goto yy13;
                case 'B':
                case 'b':    goto yy22;
                case 'C':
                case 'G':
                case 'J':
                case 'K':
                case 'L':
                case 'Q':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'c':
                case 'g':
                case 'j':
                case 'k':
                case 'l':
                case 'q':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy23;
                case 'D':
                case 'd':    goto yy20;
                case 'E':
                case 'e':    goto yy16;
                case 'F':
                case 'f':    goto yy12;
                case 'H':
                case 'h':    goto yy19;
                case 'I':
                case 'i':    goto yy21;
                case 'M':
                case 'm':    goto yy15;
                case 'N':
                case 'n':    goto yy18;
                case 'O':
                case 'o':    goto yy14;
                case 'P':
                case 'p':    goto yy11;
                case 'R':
                case 'r':    goto yy17;
                case 'S':
                case 's':    goto yy9;
                case '[':    goto yy34;
                case ']':    goto yy36;
                case '{':    goto yy30;
                case '}':    goto yy32;
                default:    goto yy55;
                }
yy2:
                { line_number_++; goto start; }
yy3:
                ++yy_cursor_;
                yych = *yy_cursor_;
                goto yy191;
yy4:
                { goto start; }
yy5:
                ++yy_cursor_;
                yych = *yy_cursor_;
                goto yy189;
yy6:
                { goto start; }
yy7:
                yych = *++yy_cursor_;
                goto yy2;
yy8:
                yych = *++yy_cursor_;
                goto yy2;
yy9:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case 'E':
                case 'e':    goto yy152;
                case 'L':
                case 'l':    goto yy153;
                case 'T':
                case 't':    goto yy154;
                case 'U':
                case 'u':    goto yy155;
                default:    goto yy74;
                }
yy10:
                { return TOKEN_NAME; }
yy11:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'R':
                case 'r':    goto yy142;
                default:    goto yy74;
                }
yy12:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'L':
                case 'l':    goto yy133;
                case 'R':
                case 'r':    goto yy134;
                default:    goto yy74;
                }
yy13:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy130;
                default:    goto yy74;
                }
yy14:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'R':
                case 'r':    goto yy128;
                default:    goto yy74;
                }
yy15:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy117;
                case 'I':
                case 'i':    goto yy118;
                case 'S':
                case 's':    goto yy119;
                default:    goto yy74;
                }
yy16:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'L':
                case 'l':    goto yy109;
                default:    goto yy74;
                }
yy17:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy92;
                case 'O':
                case 'o':    goto yy93;
                default:    goto yy74;
                }
yy18:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy89;
                default:    goto yy74;
                }
yy19:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy85;
                default:    goto yy74;
                }
yy20:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'A':
                case 'a':    goto yy82;
                default:    goto yy74;
                }
yy21:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy79;
                default:    goto yy74;
                }
yy22:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'L':
                case 'l':    goto yy75;
                default:    goto yy74;
                }
yy23:
                yych = *++yy_cursor_;
                goto yy74;
yy24:
                yyaccept = 0;
                yych = *(yy_marker_ = ++yy_cursor_);
                switch (yych) {
                case '"':    goto yy67;
                case '.':
                case '[':
                case ']':
                case '^':
                case '|':    goto yy70;
                default:    goto yy25;
                }
yy25:
                { return TOKEN_UNKNOWN; }
yy26:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '.':    goto yy64;
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':    goto yy62;
                default:    goto yy27;
                }
yy27:
                { return TOKEN_INTEGER; }
yy28:
                ++yy_cursor_;
                { return TOKEN_COLON; }
yy30:
                ++yy_cursor_;
                { return TOKEN_LBRACE; }
yy32:
                ++yy_cursor_;
                { return TOKEN_RBRACE; }
yy34:
                ++yy_cursor_;
                { return TOKEN_LBRACKET; }
yy36:
                ++yy_cursor_;
                { return TOKEN_RBRACKET; }
yy38:
                ++yy_cursor_;
                { return TOKEN_COMMA; }
yy40:
                ++yy_cursor_;
                { return TOKEN_DOT; }
yy42:
                ++yy_cursor_;
                { return TOKEN_LPAREN; }
yy44:
                ++yy_cursor_;
                { return TOKEN_RPAREN; }
yy46:
                ++yy_cursor_;
                { return TOKEN_EQUAL; }
yy48:
                yych = *++yy_cursor_;
                switch (yych) {
                case '=':    goto yy60;
                default:    goto yy25;
                }
yy49:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '=':    goto yy58;
                default:    goto yy50;
                }
yy50:
                { return TOKEN_LESS_THAN; }
yy51:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '=':    goto yy56;
                default:    goto yy52;
                }
yy52:
                { return TOKEN_GREATER_THAN; }
yy53:
                ++yy_cursor_;
                { return TOKEN_EOS; }
yy55:
                yych = *++yy_cursor_;
                goto yy25;
yy56:
                ++yy_cursor_;
                { return TOKEN_GREATER_THAN_EQUAL; }
yy58:
                ++yy_cursor_;
                { return TOKEN_LESS_THAN_EQUAL; }
yy60:
                ++yy_cursor_;
                { return TOKEN_NOT_EQUAL; }
yy62:
                ++yy_cursor_;
                if (yy_limit_ <= yy_cursor_) if (!fill(1)) { return TOKEN_EOS; }
                yych = *yy_cursor_;
                switch (yych) {
                case '.':    goto yy64;
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':    goto yy62;
                default:    goto yy27;
                }
yy64:
                ++yy_cursor_;
                if (yy_limit_ <= yy_cursor_) if (!fill(1)) { return TOKEN_EOS; }
                yych = *yy_cursor_;
                switch (yych) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':    goto yy64;
                default:    goto yy66;
                }
yy66:
                { return TOKEN_FLOAT; }
yy67:
                yyaccept = 1;
                yy_marker_ = ++yy_cursor_;
                if (yy_limit_ <= yy_cursor_) if (!fill(1)) { return TOKEN_EOS; }
                yych = *yy_cursor_;
                switch (yych) {
                case '"':    goto yy67;
                case '.':
                case '[':
                case ']':
                case '^':
                case '|':    goto yy70;
                default:    goto yy69;
                }
yy69:
                { return TOKEN_STRING; }
yy70:
                ++yy_cursor_;
                if (yy_limit_ <= yy_cursor_) if (!fill(1)) { return TOKEN_EOS; }
                yych = *yy_cursor_;
                switch (yych) {
                case '"':    goto yy67;
                case '.':
                case '[':
                case ']':
                case '^':
                case '|':    goto yy70;
                default:    goto yy72;
                }
yy72:
                yy_cursor_ = yy_marker_;
                switch (yyaccept) {
                case 0: 	goto yy25;
                case 1: 	goto yy69;
                }
yy73:
                ++yy_cursor_;
                if (yy_limit_ <= yy_cursor_) if (!fill(1)) { return TOKEN_EOS; }
                yych = *yy_cursor_;
yy74:
                switch (yych) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy10;
                }
yy75:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy76;
                default:    goto yy74;
                }
yy76:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'B':
                case 'b':    goto yy77;
                default:    goto yy74;
                }
yy77:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy78;
                }
yy78:
                { return TOKEN_TYPE_BLOB; }
yy79:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy80;
                default:    goto yy74;
                }
yy80:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy81;
                }
yy81:
                { return TOKEN_TYPE_INT; }
yy82:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'Y':
                case 'y':    goto yy83;
                default:    goto yy74;
                }
yy83:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy84;
                }
yy84:
                { return TOKEN_DAY; }
yy85:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'U':
                case 'u':    goto yy86;
                default:    goto yy74;
                }
yy86:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'R':
                case 'r':    goto yy87;
                default:    goto yy74;
                }
yy87:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy88;
                }
yy88:
                { return TOKEN_HOUR; }
yy89:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy90;
                default:    goto yy74;
                }
yy90:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy91;
                }
yy91:
                { return TOKEN_NOT; }
yy92:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'C':
                case 'c':    goto yy98;
                case 'L':
                case 'l':    goto yy97;
                default:    goto yy74;
                }
yy93:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'W':
                case 'w':    goto yy94;
                default:    goto yy74;
                }
yy94:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'S':
                case 's':    goto yy95;
                default:    goto yy74;
                }
yy95:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy96;
                }
yy96:
                { return TOKEN_ROWS; }
yy97:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'A':
                case 'a':    goto yy103;
                default:    goto yy74;
                }
yy98:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy99;
                default:    goto yy74;
                }
yy99:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy100;
                default:    goto yy74;
                }
yy100:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy101;
                default:    goto yy74;
                }
yy101:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy102;
                }
yy102:
                { return TOKEN_RECENT; }
yy103:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy104;
                default:    goto yy74;
                }
yy104:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'I':
                case 'i':    goto yy105;
                default:    goto yy74;
                }
yy105:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy106;
                default:    goto yy74;
                }
yy106:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy107;
                default:    goto yy74;
                }
yy107:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy108;
                }
yy108:
                { return TOKEN_RELATION; }
yy109:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy110;
                default:    goto yy74;
                }
yy110:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'C':
                case 'c':    goto yy111;
                default:    goto yy74;
                }
yy111:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy112;
                default:    goto yy74;
                }
yy112:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                case 'I':
                case 'i':    goto yy114;
                default:    goto yy113;
                }
yy113:
                { return TOKEN_ELECT; }
yy114:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy115;
                default:    goto yy74;
                }
yy115:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy116;
                default:    goto yy74;
                }
yy116:
                yych = *++yy_cursor_;
                switch (yych) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy113;
                }
yy117:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'A':
                case 'a':    goto yy125;
                default:    goto yy74;
                }
yy118:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy123;
                default:    goto yy74;
                }
yy119:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy120;
                default:    goto yy74;
                }
yy120:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'C':
                case 'c':    goto yy121;
                default:    goto yy74;
                }
yy121:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy122;
                }
yy122:
                { return TOKEN_MSEC; }
yy123:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy124;
                }
yy124:
                { return TOKEN_MIN; }
yy125:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy126;
                default:    goto yy74;
                }
yy126:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy127;
                }
yy127:
                { return TOKEN_MEAN; }
yy128:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy129;
                }
yy129:
                { return TOKEN_OR; }
yy130:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'D':
                case 'd':    goto yy131;
                default:    goto yy74;
                }
yy131:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy132;
                }
yy132:
                { return TOKEN_AND; }
yy133:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy138;
                default:    goto yy74;
                }
yy134:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy135;
                default:    goto yy74;
                }
yy135:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'M':
                case 'm':    goto yy136;
                default:    goto yy74;
                }
yy136:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy137;
                }
yy137:
                { return TOKEN_FROM; }
yy138:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'A':
                case 'a':    goto yy139;
                default:    goto yy74;
                }
yy139:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy140;
                default:    goto yy74;
                }
yy140:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy141;
                }
yy141:
                { return TOKEN_TYPE_FLOAT; }
yy142:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy143;
                default:    goto yy74;
                }
yy143:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'J':
                case 'j':    goto yy144;
                default:    goto yy74;
                }
yy144:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy145;
                default:    goto yy74;
                }
yy145:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'C':
                case 'c':    goto yy146;
                default:    goto yy74;
                }
yy146:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy147;
                default:    goto yy74;
                }
yy147:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                case 'I':
                case 'i':    goto yy149;
                default:    goto yy148;
                }
yy148:
                { return TOKEN_PROJECT; }
yy149:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy150;
                default:    goto yy74;
                }
yy150:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy151;
                default:    goto yy74;
                }
yy151:
                yych = *++yy_cursor_;
                switch (yych) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy148;
                }
yy152:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'C':
                case 'c':    goto yy179;
                case 'L':
                case 'l':    goto yy178;
                default:    goto yy74;
                }
yy153:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'I':
                case 'i':    goto yy174;
                default:    goto yy74;
                }
yy154:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'R':
                case 'r':    goto yy165;
                default:    goto yy74;
                }
yy155:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'M':
                case 'm':    goto yy156;
                default:    goto yy74;
                }
yy156:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'M':
                case 'm':    goto yy157;
                default:    goto yy74;
                }
yy157:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'A':
                case 'a':    goto yy158;
                default:    goto yy74;
                }
yy158:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy159;
                default:    goto yy74;
                }
yy159:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'I':
                case 'i':    goto yy160;
                default:    goto yy74;
                }
yy160:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy161;
                default:    goto yy74;
                }
yy161:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy162;
                default:    goto yy74;
                }
yy162:
                yych = *++yy_cursor_;
                switch (yych) {
                case '?':    goto yy163;
                default:    goto yy74;
                }
yy163:
                ++yy_cursor_;
                { return TOKEN_SUM; }
yy165:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy166;
                case 'I':
                case 'i':    goto yy167;
                default:    goto yy74;
                }
yy166:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'A':
                case 'a':    goto yy171;
                default:    goto yy74;
                }
yy167:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy168;
                default:    goto yy74;
                }
yy168:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'G':
                case 'g':    goto yy169;
                default:    goto yy74;
                }
yy169:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy170;
                }
yy170:
                { return TOKEN_TYPE_STRING; }
yy171:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'M':
                case 'm':    goto yy172;
                default:    goto yy74;
                }
yy172:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy173;
                }
yy173:
                { return TOKEN_STREAM; }
yy174:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'D':
                case 'd':    goto yy175;
                default:    goto yy74;
                }
yy175:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy176;
                default:    goto yy74;
                }
yy176:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy177;
                }
yy177:
                { return TOKEN_SLIDE; }
yy178:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'E':
                case 'e':    goto yy181;
                default:    goto yy74;
                }
yy179:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy180;
                }
yy180:
                { return TOKEN_SEC; }
yy181:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'C':
                case 'c':    goto yy182;
                default:    goto yy74;
                }
yy182:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'T':
                case 't':    goto yy183;
                default:    goto yy74;
                }
yy183:
                ++yy_cursor_;
                switch ((yych = *yy_cursor_)) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                case 'I':
                case 'i':    goto yy185;
                default:    goto yy184;
                }
yy184:
                { return TOKEN_SELECT; }
yy185:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'O':
                case 'o':    goto yy186;
                default:    goto yy74;
                }
yy186:
                yych = *++yy_cursor_;
                switch (yych) {
                case 'N':
                case 'n':    goto yy187;
                default:    goto yy74;
                }
yy187:
                yych = *++yy_cursor_;
                switch (yych) {
                case '0':
                case '1':
                case '2':
                case '3':
                case '4':
                case '5':
                case '6':
                case '7':
                case '8':
                case '9':
                case 'A':
                case 'B':
                case 'C':
                case 'D':
                case 'E':
                case 'F':
                case 'G':
                case 'H':
                case 'I':
                case 'J':
                case 'K':
                case 'L':
                case 'M':
                case 'N':
                case 'O':
                case 'P':
                case 'Q':
                case 'R':
                case 'S':
                case 'T':
                case 'U':
                case 'V':
                case 'W':
                case 'X':
                case 'Y':
                case 'Z':
                case '_':
                case 'a':
                case 'b':
                case 'c':
                case 'd':
                case 'e':
                case 'f':
                case 'g':
                case 'h':
                case 'i':
                case 'j':
                case 'k':
                case 'l':
                case 'm':
                case 'n':
                case 'o':
                case 'p':
                case 'q':
                case 'r':
                case 's':
                case 't':
                case 'u':
                case 'v':
                case 'w':
                case 'x':
                case 'y':
                case 'z':    goto yy73;
                default:    goto yy184;
                }
yy188:
                ++yy_cursor_;
                if (yy_limit_ <= yy_cursor_) if (!fill(1)) { return TOKEN_EOS; }
                yych = *yy_cursor_;
yy189:
                switch (yych) {
                case '\t':
                case '\v':
                case '\f':
                case ' ':    goto yy188;
                default:    goto yy6;
                }
yy190:
                ++yy_cursor_;
                if (yy_limit_ <= yy_cursor_) if (!fill(1)) { return TOKEN_EOS; }
                yych = *yy_cursor_;
yy191:
                switch (yych) {
                case '\n':    goto yy192;
                default:    goto yy190;
                }
yy192:
                ++yy_cursor_;
                yych = *yy_cursor_;
                goto yy4;
            }

        }

        static bool is_token_conjunctive(int token) {
            return token == TOKEN_AND || token == TOKEN_OR;
        }

        static bool is_token_value(int token) {
            return token == TOKEN_STRING || token == TOKEN_INTEGER || token == TOKEN_FLOAT;
        }

        long get_current_line_number() {
            return line_number_;
        }

        long get_current_cursor_point() {
            return 0;
        }

        template <typename Stream>
        void print_error_point(Stream& stream = std::cout) {
            // stream << current_line_ << std::endl;
            // for (int i = 0; i < get_current_cursor_point() - 1; ++i)
            //     stream << '_';
            // stream << '^';
        }

        static currentia::Comparator::Type
        token_to_comparator(int comparator_type) {
            using namespace currentia::Comparator;

            switch (comparator_type) {
            case TOKEN_EQUAL:
                return EQUAL;
            case TOKEN_NOT_EQUAL:
                return NOT_EQUAL;
            case TOKEN_LESS_THAN:
                return LESS_THAN;
            case TOKEN_LESS_THAN_EQUAL:
                return LESS_THAN_EQUAL;
            case TOKEN_GREATER_THAN:
                return GREATER_THAN;
            case TOKEN_GREATER_THAN_EQUAL:
                return GREATER_THAN_EQUAL;
            default:
                throw "comparator type not given";
            };
        }
    };
}

#ifdef CURRENTIA_IS_LEXER_MAIN_

#include "parser.c"

int main(int argc, char** argv)
{
    std::istringstream is(
        " stream purchases(goods_id: int, user_id: int)"
        " relation goods(id: int, price: int)"
        " "
        " stream result"
        " from purchases, goods [purchases.id = goods.goods_id]"
        " {"
        "   selection goods.price < 5000"
        "   mean goods.price recent 5 rows slide 5 rows"
        " }"
    );
    currentia::Lexer lexer(&is);
    int token;

    yyParser* parser = reinterpret_cast<yyParser*>(CPLParseAlloc(malloc));
    currentia::CPLContainer cpl_container;
    std::string current_token_string;
    cpl_container.current_token_string = &current_token_string;

    while ((token = lexer.get_next_token()) != TOKEN_EOS) {
        // std::cout << "token => " << currentia::Lexer::token_to_string(token)
        //           << " '" << lexer.get_token_text() << "'" << std::endl;
        current_token_string = lexer.get_token_text();
        CPLParse(parser, token, new std::string(current_token_string), &cpl_container);
    }

    CPLParse(parser, TOKEN_EOS, NULL, &cpl_container);
    CPLParseFree(parser, free);

    return 0;
}
#endif

#endif  /* ! CURRENTIA_QUERY_LEXER_H_  */
